parameters:
  compiler: 'cc'

steps:
  - task: Bash@3
    inputs:
      targetType: inline
      script: make build-release
    env:
      CC: '${{ parameters.compiler }}'
    displayName: Compile with optimizations

  - script: ./lexy -v
    displayName: Show lexy version

  - script: ./lexy -r
    displayName: Show lexy release info

  - script: ./lexy -e "(print (add 1 1))"
    displayName: Evaluate code
